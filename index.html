<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Colour Clock</title>
</head>

<body onload="mytime(); draw()">
    <div id="container">
        <canvas id="icon" width="150" height="150">

        </canvas>
    </div>
    <script>
        const time = document.createElement("h1");
        let timeColor;
        time.id = 'timehere';
        time.style.alignSelf = "center";
        time.style.margin = "auto";
        time.style.textAlign = "center";
        time.style.color = "white";
        time.style.mixBlendMode = "difference";

        function draw() {
            var canvas = document.getElementById("icon");
            if (canvas.getContext) {
                var ctx = canvas.getContext('2d');

                ctx.fillStyle = timeColor;
                ctx.fillRect(0,0,150,150);
            }

            canvas.toBlob(function(blob) {
            var newImg = document.createElement('img'),
                url = URL.createObjectURL(blob);

            newImg.onload = function() {
                // no longer need to read the blob so it's revoked
                URL.revokeObjectURL(url);
                };
                const ico = document.createElement("link");
                ico.setAttribute('rel', 'icon'); ico.setAttribute('type', 'image/png'); ico.setAttribute('href', url);
                document.head.appendChild(ico);
            })
        }

        function mytime() {
            var d = new Date();
            let h = d.getHours();
            let m = d.getMinutes();
            let s = d.getSeconds();
            if (h < 10) { h = "0" + h; }
            if (m < 10) { m = "0" + m; }
            if (s < 10) { s = "0" + s; }
            document.getElementById('timehere').innerHTML = h + ":" + m + ":" + s + " ";
            timeColor = "#" + h + m + s;
            document.body.style.backgroundColor = timeColor;
            let t = setTimeout('mytime()', 250);
            //console.log(timeColor);
        }

        const container = document.querySelector("#container");
        container.style.display = "flex";
        container.style.justiftContent = "center";
        container.style.alignItems = "center";
        container.style.height = "100vh";
        container.appendChild(time);

    </script>
</body>

</html>